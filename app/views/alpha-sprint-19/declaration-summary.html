{% extends "layouts/main.html" %}

{% set pageName="Declaration from academy trust chair summary" %}

{% block beforeContent %}
  {{ govukBackLink({
    text: "Back to application task list",
    href: "application-task-list?ref=" + data.application.reference,
    classes: "govuk-!-margin-top-6"
  }) }}
{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds govuk-!-margin-bottom-6">
    
    <h1 class="govuk-heading-xl govuk-!-margin-bottom-6" id="declaration">
      Declaration from Chairs of trustees
    </h1>

    <p class="govuk-body govuk-!-margin-bottom-9">The Chair of trustees from each trust involved in the transfer must complete a declaration.</p>

     <!--<p class="govuk-body">You need to mark these tasks as complete first:</p>
          <ul class="govuk-list govuk-list--bullet govuk-!-margin-bottom-9">
            <li> <a class="govuk-link" href="incoming-trust-summary">Trust details</a> in the 'About the trust that academies are joining' section</li>
            <li> <a class="govuk-link" href="academies-to-transfer">Details of the academies</a> task</li>
            <li><a class="govuk-link" href="outgoing-trusts-summary">Trust details</a> in the 'About the trusts that academies are leaving' section </li>
          </ul>-->

    <h2 class="govuk-heading-m">Declaration form for the trust that academies are joining</h2>
    {% if data.selectedTrust and data.selectedTrust.name %}
    <dl class="govuk-summary-list govuk-!-margin-bottom-9">
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          {{ data.selectedTrust.name }}
        </dt>
        <dd class="govuk-summary-list__value">
          <strong class="govuk-tag {% if incomingTrustStatus === 'Signed' %}govuk-tag--green{% else %}govuk-tag--blue{% endif %}">
            {{ incomingTrustStatus }}
          </strong>
        </dd>
        <dd class="govuk-summary-list__actions">
          <a class="govuk-link" href="declaration-form?trust={{ data.selectedTrust.name | urlencode }}">
            View<span class="govuk-visually-hidden"> declaration for {{ data.selectedTrust.name }}</span>
          </a>
        </dd>
      </div>
    </dl>
    {% else %}
    <p class="govuk-body">You need to mark the <a class="govuk-link" href="incoming-trust-summary">Trust details</a> task as complete first.</p>
    {% endif %}

    <h2 class="govuk-heading-m">Declaration forms for trusts that academies are leaving</h2>
    {% if uniqueOutgoingTrusts and uniqueOutgoingTrusts.length > 0 %}
    <dl class="govuk-summary-list govuk-!-margin-bottom-9">
      {% for trust in uniqueOutgoingTrusts %}
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          {{ trust }}
        </dt>
        <dd class="govuk-summary-list__value">
          <strong class="govuk-tag {% if outgoingTrustsStatus[trust] === 'Signed' %}govuk-tag--green{% else %}govuk-tag--blue{% endif %}">
            {{ outgoingTrustsStatus[trust] or 'Not signed yet' }}
          </strong>
        </dd>
        <dd class="govuk-summary-list__actions">
          <a class="govuk-link" href="declaration-form?trust={{ trust | urlencode }}">
            View<span class="govuk-visually-hidden"> declaration for {{ trust }}</span>
          </a>
        </dd>
      </div>
      {% endfor %}
    </dl>
    {% else %}
    <p class="govuk-body">You need to mark the <a class="govuk-link" href="outgoing-trusts-summary">Details of trusts </a> task as complete first.</p>
    {% endif %}

    <form action="application-task-list" method="post">
      <input type="hidden" name="from-check-answers" value="{{ 'true' if data['from-check-answers'] else 'false' }}">
      <div class="govuk-form-group govuk-!-margin-top-9">
        <div class="govuk-checkboxes" data-module="govuk-checkboxes">
          <div class="govuk-checkboxes__item">
            <input class="govuk-checkboxes__input" id="declaration-status" name="declaration-status" type="checkbox" value="Complete" {% if data['declaration-status'] %}checked{% endif %}>
            <label class="govuk-label govuk-checkboxes__label" for="declaration-status">
              Mark this section as complete, it's ready for review
            </label>
          </div>
        </div>
      </div>
      <div class="govuk-button-group">
        {{ govukButton({
          text: "Continue"
        }) }}
      </div>
    </form>
  </div>
</div>

{% endblock %} 